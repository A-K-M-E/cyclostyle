<!doctype html>
<html class="h-100">
<head>

<!-- Must -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
<meta name="description" content="">
<meta name="keywords" content="">
<link rel="manifest" href="manifest.json">
<title>Cyclostyle</title>
<!-- Android  -->
<meta name="theme-color" content="white">
<meta name="mobile-web-app-capable" content="yes">

<!-- iOS -->
<meta name="apple-mobile-web-app-title" content="Ciclostyle intergalattico">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<!-- Windows  -->
<meta name="msapplication-navbutton-color" content="white">
<meta name="msapplication-TileColor" content="white">
<meta name="msapplication-TileImage" content="icons/ms-icon-144x144.png">
<meta name="msapplication-config" content="icons/browserconfig.xml">

<!-- Pinned Sites  -->
<meta name="application-name" content="Ciclostyle intergalattico">
<meta name="msapplication-tooltip" content="Ciclostyle intergalattico">
<meta name="msapplication-starturl" content="/">

<!-- Tap highlighting  -->
<meta name="msapplication-tap-highlight" content="no">

<!-- UC Mobile Browser  -->
<meta name="full-screen" content="yes">
<meta name="browsermode" content="application">

<!-- Disable night mode for this page  -->
<meta name="nightmode" content="enable/disable">

<!-- Fitscreen  -->
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Layout mode -->
<meta name="layoutmode" content="fitscreen/standard">

<!-- imagemode - show image even in text only mode  -->
<meta name="imagemode" content="force">

<!-- Orientation  -->
<meta name="screen-orientation" content="portrait">

<!-- Main Link Tags  -->
<link href="icons/favicon-16x16.png" rel="icon" type="image/png" sizes="16x16">
<link href="icons/favicon-32x32.png" rel="icon" type="image/png" sizes="32x32">
<link href="icons/favicon-96x96.png" rel="icon" type="image/png" sizes="96x96">

<!-- iOS  -->
<link href="icons/apple-icon.png" rel="apple-touch-icon">
<link href="icons/apple-icon-76x76.png" rel="apple-touch-icon" sizes="76x76">
<link href="icons/apple-icon-120x120.png" rel="apple-touch-icon" sizes="120x120">
<link href="icons/apple-icon-152x152.png" rel="apple-touch-icon" sizes="152x152">
<link href="icons/apple-icon-180x180.png" rel="apple-touch-icon" sizes="180x180" >


<!-- Startup Image  -->
<!--<link href="touch-icon-start-up-320x480.png" rel="apple-touch-startup-image">-->

<!-- Pinned Tab  -->
<!--<link href="path/to/icon.svg" rel="mask-icon" size="any" color="white">-->

<!-- Android  -->
<link href="icons/android-icon-192x192.png" rel="icon" sizes="192x192">
<!--<link href="icon-128x128.png" rel="icon" sizes="128x128">-->

<!-- Others -->
<link href="icons/favicon.ico" rel="shortcut icon" type="image/x-icon">

<!-- UC Browser  -->
<link href="icons/apple-icon-57x57.png" rel="apple-touch-icon-precomposed" sizes="57x57">
<link href="icons/apple-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">


<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/font.css">
<link rel="stylesheet" href="css/style.css">

<!-- interfaccia http ipfs-->
<!-- <script src="https://ipfs.io/ipfs/QmRaSYnTBnKyYw83dDFvq8Rxwt4Qn5LRkCRdLJCAVxNgau"></script>-->
<!-- jQuery-slim-minified-->
<script src="js/jquery-3.4.1.slim.min.js" ></script>

<!-- mustache -->
<script src="js/mustache.js"></script>
<!--  IPFS -->
<script src="js/ipfs.js" ></script>

<!-- Cropper delle immagini -->
<link rel="stylesheet" href="css/cropper.min.css">
<script src="js/cropper.min.js"></script>

<!--  Qrcode from https://www.cssscript.com/demo/pure-javascript-qr-code-generator-qrious/-->
<script src="js/qrious.js" ></script>

<!--  Richtext from https://github.com/webfashionist/RichText -->
<link rel="stylesheet" href="css/font-awesome.min.css">
<link rel="stylesheet" href="css/richtext.min.css">
<script src="js/jquery.richtext.min.js" ></script>


<!-- Tutto il javascript custom -->
<script src="js/custom-javascript.js"></script>
<script> if ('serviceWorker' in navigator) { navigator.serviceWorker.register('./sw.js') .then(function(registration) { console.log('Registration successful, scope is:', registration.scope); }) .catch(function(error) { console.log('Service worker registration failed, error:', error); }); } </script>

</head>
<body class="d-flex flex-column h-100">
  <header>
    <nav class="navbar home">
      <div class="container-fluid bg-logo navbar-brand ">
          <img src="images/logo.svg" alt="" width="275" height="63">
        <button class="btn overlay" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"><span class="navbar-toggler-icon"></span></button>
      </div>
    </nav>
    <div class="offcanvas offcanvas-end " tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
      <div class="offcanvas-header">
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body p-0">
        <!-- main menu -->
        <ul class="navbar-nav main-menu">
          <li class="nav-item">
            <a class="nav-link create" data-target="page-create" href="#" data-footer="true" data-bs-dismiss="offcanvas" data-mlr-text>new flyer</a>
          </li>
          <li class="nav-item">
            <a class="nav-link drafts" data-target="page-drafts" href="#" data-footer="false" data-bs-dismiss="offcanvas" data-mlr-text>drafts</a>
          </li>
          <li class="nav-item">
            <a class="nav-link bookmarks" data-target="page-bookmarks" href="#" data-footer="false" data-bs-dismiss="offcanvas" data-mlr-text>bookmarks</a>
          </li>
          <li class="nav-item">
            <a class="nav-link settings" data-target="page-settings" href="#" data-footer="false" data-bs-dismiss="offcanvas" data-mlr-text>settings</a>
          </li>
        </ul>
      </div>
    </div>
  </header>
  <main class="flex-shrink-0">
    <!-- Homepage -->
    <div class="container pt-3 h-100 pages" id="page-home">
      <div class="header-logo-home position-absolute top-50 start-50 w-100 text-center">
        <div class="logo-home">
          <div class="logo position-absolute end-0 w-100"><img src="images/logo.svg" alt="" width="295" height="68"></div>
          <div class="position-absolute end-0 w-100 line line-right p-0 m-0"></div>
        </div>
        <div class="input-group mb-0 pt-4 " id="firstSelctionLang">
          <label class="input-group-text" for="inputGroupSelect02" data-mlr-text>Language</label>
          <select class="form-select" id="mbPOCControlsLangDrop">
          </select>
        </div>
      <a href="#" class="btn btn-outline-danger mt-4 create home-create" data-mlr-text>create a flyer</a>
      </div>
    </div>
    <!--Page create a flyer-->
    <div class="container pt-3 pages hide" id="page-create">
      <h1 class="title-page" data-mlr-text>new flyer</h1>
      <form id="create-flyer" class="needs-validation" novalidate>
      <!--carousel content-->
      <div id="carousel-content" class="carousel carousel-dark slide mt-3" data-bs-ride="carousel" data-bs-interval="false">
         <div class="carousel-inner ">
           <!--panel tempalte-->
           <div class="carousel-item active">
             <div class="d-flex justify-content-between">
             <h2 data-mlr-text>Template</h2>
             <button class="carousel-control-next" type="button" data-bs-target="#carousel-content" data-bs-slide="next">
               <span data-mlr-text>Next ></span>
             </button>
              </div>
               <div class="mb-3">
                 <label for="colorInput" class="form-label" data-mlr-text>Main color</label>
                 <input type="color" class="form-control form-control-color" id="colorInput" value="#0397BB" title="Choose your color">
               </div>
               <div class="input-group mb-3">
                 <label class="input-group-text" for="selectTemplate" data-mlr-text>Template</label>
                 <select class="form-select" id="selectTemplate">
                   <option selected value="default">Default</option>
                   <option value="boring-manifesto">Boring manifesto</option>
                   <option value="cyberpunk-sam">Sam cyberpunk</option>
                 </select>
               </div>
               <div class="mb-3 pb-2 page">
                 <label for="formFile" class="form-label" data-mlr-text>Upload, Crop and save cover</label>
                 <small>(1024px min-width, max-size 1.5Mb)</small>
                 <!-- input file crop-->
                 <input class="form-control mb-3" type="file" id="cover" accept="image/*">

                 <!-- result of crop -->
               	<div class="box-2 img-result hide mb-3 mt-3">
                   <label for="cropImg" class="form-label" data-mlr-text>Preview cover</label>
               		<img id="croppedImage" class="cropped" src="" alt="">
               	</div>

            </div>
          </div>
          <!--panel content-->
          <div class="carousel-item">
            <div class="d-flex justify-content-between">
            <h2 data-mlr-text>Content</h2>
            <div class="d-flex justify-content-end">
              <button class="carousel-control-prev prev-content" type="button" data-bs-target="#carousel-content" data-bs-slide="prev">
                <span data-mlr-text>< Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carousel-content" data-bs-slide="next">
                <span data-mlr-text>Next ></span>
              </button>
            </div>
            </div>
              <div class="mb-3">
                <label for="titleInput" class="form-label" data-mlr-text>Title *</label>
                <div class="invalid-feedback" data-mlr-text>Please provide a title.</div>
                <input type="text" class="form-control" id="titleInput" placeholder="required title" required>
              </div>
              <div class="mb-3">
                <label for="bodyTextarea" class="form-label" data-mlr-text>Body *</label>
                <div class="invalid-feedback" data-mlr-text>Please provide a body.</div>
                <textarea class="form-control" id="bodyTextarea" rows="3" placeholder="required text" required></textarea>
              </div>
          </div>
          <!--panel date-->
          <div class="carousel-item">
            <div class="d-flex justify-content-between">
            <h2 data-mlr-text>Details</h2>
            <button class="carousel-control-prev" type="button" data-bs-target="#carousel-content" data-bs-slide="prev">
              <span data-mlr-text>< Previous</span>
            </button>
            </div>
            <div class="mb-3">
              <label for="whoInput" class="form-label" data-mlr-text>Who?</label>
              <input type="text" id="whoInput" class="form-control">
            </div>
            <div class="mb-3">
              <label for="whereInput" class="form-label" data-mlr-text>Where?</label>
              <input type="text" id="whereInput" class="form-control">
            </div>
              <div class="mb-3">
                <label for="dateInput" class="form-label" data-mlr-text>When?</label>
                <input type="text" class="form-control" id="dateInput">
              </div>
              <div class="mb-3">
                <label for="timeInput" class="form-label" data-mlr-text>Hours</label>
                <input type="text" class="form-control" id="timeInput">
              </div>
          </div>
    </div>
  </div>
  </form>
        <!-- preview flyer -->
        <div id="content-flyer" class="hide mt-3">
          <div class="text-end finalize hide mb-1 mt-1">
            <div class="preview-device d-flex w-100 justify-content-end">
              <button type="submit" class="btn btn-outline-danger ms-1 back" data-mlr-text>Edit</button>
              <button type="submit" class="btn btn-primary ms-1 save-draft" id="save-draft" data-mlr-text>Save Draft</button>
              <button  type="submit" class="btn btn-primary ms-1" data-bs-toggle="modal" data-bs-target="#ipfsmodal" data-mlr-text>Print On IPFS</button>
            </div>
          </div>
          <div class="float-none"></div>
          <div id="flyer"></div>
        </div>
      </div>
      <!--Page drafts-->
      <div class="container pt-3 hide pages" id="page-drafts">
        <h1 class="title-page" data-mlr-text>drafts</h1>
        <div class="list-group">
          <span data-mlr-text class="empty-records">There are no drafts saved yet.</span>
        </div>
      </div>
      <!--Page bookmarks-->
      <div class="container pt-3 hide pages" id="page-bookmarks">
        <div class="d-flex justify-content-between title-page">
          <h1 data-mlr-text>bookmarks</h1>
          <button type="submit" class="btn btn-outline-danger add" title="Add bookmark" data-bs-toggle="modal" data-bs-target="#addmodal" data-mlr-text>Add</button>
        </div>
        <div class="list-group">
          <span data-mlr-text class="empty-records">There are no bookmarks saved yet.</span>
        </div>
      </div>
      <!--Page settings -->
      <div class="container pt-3 hide pages" id="page-settings">
        <h1 class="title-page" data-mlr-text>settings</h1>
        <div>
          <div class="input-group mb-5 pt-3">
            <label class="input-group-text" for="inputGroupSelect02" data-mlr-text>Language</label>
            <select class="form-select" id="mbPOCControlsLangDrop2">
            </select>
          </div>
        </div>
      </div>

  </main>
  <!-- footer create a flyer -->
  <footer class="footer mt-auto py-3 bg-light fixed-bottom hide">
    <div class="container">
      <div id="footer-create" class="menu-create text-center">
        <!-- menu footer create a flyer -->
        <div id="indicators" class="carousel-indicators nav-pills">
            <a class="nav-link active" data-bs-target="#carousel-content" data-bs-slide-to="0" aria-label="Slide 1" data-mlr-text>Template</a>
            <a class="nav-link" data-bs-target="#carousel-content" data-bs-slide-to="1" aria-label="Slide 2" data-mlr-text>Content</a>
            <a class="nav-link" data-bs-target="#carousel-content"  data-bs-slide-to="2" aria-label="Slide 3" data-mlr-text>Details</a>
      </div>
      <button  type="submit" class="btn btn-outline-danger ms-2" id="preview" onclick="renderPreview()" data-bs-slide-to="2" data-mlr-text>Preview</button>
      </div>
      <div id="footer-preview" class="text-end finalize hide">
        <div class="d-flex w-100 justify-content-between">
            <div class="preview-device w-50 justify-content-start">
              <!-- <a href="#" class="action-btn mobile active" title="Mobile"></a
              <a href="#" class="action-btn desktop" title="Desktop"></a>
              <a href="#" class="action-btn pdf-preview" title="Pdf" data-mlr-text>Download</a> -->
            </div>
            <div class="preview-device d-flex w-0 justify-content-end">
            <button type="submit" class="btn btn-outline-danger ms-1 back" data-mlr-text>Edit</button>
            <!--<button type="submit" class="btn btn-primary ms-1 save-draft" data-mlr-text>Save Draft</button>
            <button type="submit" class="btn btn-primary ms-1" data-bs-toggle="modal" data-bs-target="#ipfsmodal" data-mlr-text>Print On IPFS</button>-->
            </div>
        </div>
      </div>
    </div>
  </footer>
  <!-- Upload animation -->
  <div class="uploading  h-100 w-100 hide">
    <div class="position-relative h-100 w-100">
      <div class="position-absolute top-50 start-50 translate-middle w-100 text-center">
      <img src="images/loading.gif" alt="" style="cursor: default;" class="w-auto h-auto" width="350" height="118">
      </div>
    </div>
  </div>
  <!-- Modal Crop -->
  <div class="modal fade" id="cropmodal" tabindex="-1" aria-labelledby="infomodalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="infomodaLabel" data-mlr-text>Crop</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body"><!--cropper-->
          <div class="box-cropper container-fluid">
    		   <div class="result mb-3" id="result"></div>
           <div class="options hide">
             <input type="number" class="img-w" value="1024" min="768" max="1024" />
           </div>
        	</div></div>
        <div class="modal-footer">
          <!-- save btn crop-->
          <button class="btn close btn-primary " data-mlr-text data-bs-dismiss="modal">Done</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal Invalid file -->
  <div class="modal fade" id="invalidfilemodal"  tabindex="-1" aria-labelledby="invalidfilemodalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-body text-center"><span data-mlr-text>File size exceeds 1.5Mb</span></div>
      </div>
    </div>
  </div>
  <!-- Modal Delete -->
  <div class="modal fade" id="infomodal" tabindex="-1" aria-labelledby="infomodalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="infomodaLabel" data-mlr-text>Delete item</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" data-mlr-text>Are you sure you want to delete this item? You won't be able to recover it.</div>
        <div class="modal-footer">
          <input type="hidden" id="key">
          <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal" data-mlr-text>No</button>
          <button type="button" class="btn btn-primary" data-mlr-text onclick="deleteItem()">Yes, delete it!</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal Print to Ipfs -->
  <div class="modal fade" id="ipfsmodal" tabindex="-1" aria-labelledby="ipfsmodalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ipfsomodaLabel" data-mlr-text>Print On IPFS</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" data-mlr-text>Are you sure you want to publish this item on Ipfs? You won't be able to edit it anymore.</div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal" data-mlr-text>No</button>
          <button type="button" class="btn btn-primary" id="printipfs" data-mlr-text>Yes, print it!</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal Qrcode -->
  <div class="modal fade" id="qrmodal"  tabindex="-1" aria-labelledby="qrmodalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="qrLabel">QRcode</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <img id="qrious">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal" data-mlr-text>Close</button>
          <a type="button" class="btn btn-primary" href="" id="download-qr" target="_blank" data-mlr-text>Download</a>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal Share -->
  <div class="modal share-dialog fade" id="sharemodal"  tabindex="-1" aria-labelledby="sharemodalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="shareLabel" data-mlr-text>Share this link</h5>
          <button type="button" class="btn-close close-button" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="link" data-value="">
            <div class="pen-url" id="share-url-text"></div>
            <button class="copy-link btn btn-primary copy" onclick="copyLink(this)" data-bs-dismiss="modal" data-mlr-text>Copy Link</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal Copy -->
  <div class="modal fade" id="copymodal"  tabindex="-1" aria-labelledby="copymodalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-body">  <img src="icons/link.svg" alt="" width="30" height="30" class="anim-copied" ><span data-mlr-text>Link copied on clipboard</span></div>
      </div>
    </div>
  </div>
  <!-- Modal Add Bookmark -->
  <div class="modal fade" id="addmodal" tabindex="-1" aria-labelledby="addmodalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <form id="add-bookmarks" class="needs-validation" novalidate>
        <div class="modal-header">
          <h5 class="modal-title" id="infomodaLabel" data-mlr-text>Add bookmark</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="titleaddInput" class="form-label" data-mlr-text>Title *</label>
            <div class="invalid-feedback" data-mlr-text>Please provide a title.</div>
            <input type="text" class="form-control" id="titleaddInput" placeholder="required title" required>
          </div>
          <div class="mb-3">
            <label for="dateaddInput" class="form-label" data-mlr-text>Date</label>
            <input type="text" class="form-control" id="dateaddInput">
          </div>
          <div class="mb-3">
            <label for="urladdInput" class="form-label">URL *</label>
            <div class="invalid-feedback" data-mlr-text>Please provide a url.</div>
            <input type="text" class="form-control" id="urladdInput" placeholder="required url" required>
          </div>
          <div class="mb-3">
            <label for="pdfaddInput" class="form-label" data-mlr-text>Pdf link</label>
            <input type="text" class="form-control" id="pdfaddInput">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal" data-mlr-text>Close</button>
          <button type="button" class="btn btn-primary" data-mlr-text id="btnAddbookmark">Add bookmark</button>
        </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal Note localStorage -->
  <div class="modal fade" id="disclaimer-storage"  tabindex="-1" aria-labelledby="copymodalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="shareLabel" data-mlr-text>Please note</h5>
          <button type="button" class="btn-close close-button" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" data-mlr-text>Cyclostyle uses localStorage for drafts and bookmarks. If you are in private mode, no data can be saved!</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal" data-mlr-text>Got it, thanks!</button>
      </div>
    </div>
  </div>
  </div>
  <!-- Modal Note Unsavedflyer -->
  <div class="modal fade" id="unsaved-changes"  tabindex="-1" aria-labelledby="copymodalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="shareLabel" data-mlr-text>Please note</h5>
            <button type="button" class="btn-close close-button" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" data-mlr-text>A flyer has not been saved. Do you want to delete it?</div>
            <div class="modal-footer modal_save_button">
                <button type="button" class="btn btn-outline-primary" id="cleanStart" data-mlr-text>Yes, create a new flyer.</button>
                <button type="button" class="btn btn-outline-primary" id="backtoEdit" data-mlr-text>No, let me edit it.</button>
            </div>
          </div>
      </div>
    </div>

<!-- jQuery-bootstrap-->
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/custom-jquery.js"></script>
<script src="js/language-picker.js"></script>
</body>
</html>
